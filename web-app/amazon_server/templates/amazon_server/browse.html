{% extends "base_generic.html" %}

{% block content %}
  <div class="container">
    <h2>Browse Items</h2>
    <p>Purchase Now</p>
    <form method="get" action="{% url 'multi_purchase' %}">
      {% csrf_token %}
      <ul>
      {% for item in items %}
        <li>
          <input type="checkbox" name="selected_items" value="{{ item.id }}">
          {{ item.description }}
          Quantity: <input type="number" name="count_{{ item.id }}" value="1" min="1">
          <ul>
            {% for comment in comments %}
              {% if comment.item == item %}
                <li>{{ comment.buyer.username }}: {{ comment.content }}</li>
              {% endif %}
            {% endfor %}
          </ul>
        </li>
      {% endfor %}
      </ul>
      <button type="submit" class="btn btn-primary">Purchase Selected Items</button>
    </form>
    <p>Add to Shopping Cart</p>
    <form method="get" action="{% url 'shopping_cart' %}">
      {% csrf_token %}
      <ul>
      {% for item in items %}
        <li>
          <input type="checkbox" name="selected_items" value="{{ item.id }}">
          {{ item.description }}
          Quantity: <input type="number" name="count_{{ item.id }}" value="1" min="1">
          <ul>
            {% for comment in comments %}
              {% if comment.item == item %}
                <li>{{ comment.buyer.username }}: {{ comment.content }}</li>
              {% endif %}
            {% endfor %}
          </ul>
        </li>
      {% endfor %}
      </ul>
      <button type="submit" class="btn btn-primary">Add</button>
    </form>
  </div>
{% endblock %}
